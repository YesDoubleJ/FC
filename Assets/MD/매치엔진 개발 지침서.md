# \[로또축구단\] 매치 엔진 아키텍처 및 구현 마스터 바이블 (Match Engine Architecture & Implementation Master Bible)

## 1. 프로젝트 비전 및 핵심 철학: 시뮬레이션의 재정의

### 1.1. 프로젝트 정체성: 아케이드에서 리얼리티로의 전환

'로또축구단(From Lotto to Legend)' 프로젝트는 기존 축구 게임 시장을
양분하고 있는 아케이드 스타일의 조작성과 *Football Manager(FM)* 류의
매니지먼트 시뮬레이션 사이의 간극을 메우는 것을 목표로 합니다. 특히 본
프로젝트가 지향하는 매치 엔진의 핵심은 \*\*'통계적 결정론(Statistical
Determinism)'\*\*과 \*\*'물리적 가시성(Physical Visibility)'\*\*의
결합입니다. 기존 *FM* 시리즈가 받고 있는 비판 중 하나인 "매치 엔진이
단순히 주사위 굴림의 시각적 연출(Placebo)에 불과하다"는
지적<sup>1</sup>을 극복하기 위해, 본 엔진은 모든 결과가 실제 물리 연산과
선수의 고유 능력치(Stats)에 의해 실시간으로 도출되는 **True 3D
Simulation**을 지향합니다.

우리의 목표는 6vs6 소규모 매치부터 11vs11 정규 규격 매치까지 확장 가능한
유연한 아키텍처를 구축하는 것입니다. 이를 위해
안티그래비티(Anti-Gravity) AI 코딩 어시스턴트가 명확히 이해하고 실행할
수 있도록, 모든 기술적 명세는 모듈화(Modularity), 데이터
주도(Data-Driven), 그리고 확장성(Scalability)을 최우선 원칙으로
합니다.<sup>2</sup>

### 1.2. 안티그래비티(Anti-Gravity) 개발 십계명

본 문서는 인간 개발자뿐만 아니라, 코드를 생성하고 리팩토링할 AI
에이전트(안티그래비티)를 위한 지침서입니다. 다음의 원칙은 코드 생성 시
절대적으로 준수되어야 합니다.

1.  **하드코딩 금지:** 좌표계는 절대값(World Space)이 아닌 정규화된
    상대값(Normalized Space)을 사용한다.<sup>2</sup>

2.  **데이터와 로직의 분리:** 모든 밸런스 데이터(속도, 마찰력, 확률
    계수)는 ScriptableObject 또는 JSON 외부 데이터로 분리하여 컴파일
    없이 수정 가능하게 한다.<sup>3</sup>

3.  **상태 기반 설계:** if-else 스파게티 코드를 지양하고, HFSM(계층적
    유한 상태 머신) 패턴을 사용하여 상태 관리를 명확히 한다.<sup>2</sup>

4.  **물리 연산의 신뢰성:** 공의 궤적은 미리 계산된 애니메이션이 아니라,
    매 프레임 물리 엔진(PhysX)의 힘과 항력, 마그누스 효과에 의해
    계산되어야 한다.<sup>4</sup>

5.  **디버깅의 시각화:** 모든 AI의 판단(패스 경로 선택, 위치 선정
    이유)은 OnDrawGizmos를 통해 시각적으로 검증 가능해야
    한다.<sup>2</sup>

## 2. 확장성 프로토콜: 6vs6 to 11vs11 스케일링 아키텍처

축구 시뮬레이션에서 인원수가 변동됨에 따라 가장 크게 영향을 받는 것은
\*\*공간 밀도(Spatial Density)\*\*와 \*\*좌표계(Coordinate
System)\*\*입니다. 6명이 뛰는 풋살 경기장과 11명이 뛰는 정규 경기장은
크기가 다르지만, "오른쪽 측면 돌파"라는 전술적 개념은 동일하게
적용되어야 합니다.

### 2.1. 정규화된 좌표계 (Normalized Coordinate System)

유니티의 월드 좌표(Vector3)를 직접 사용하는 것은 확장성을 저해하는 가장
큰 요인입니다. 따라서 본 엔진은 경기장의 크기에 구애받지 않는 정규화된
좌표계 (-1.0, -1.0) ~ (1.0, 1.0)를 도입합니다.

| **좌표 개념** | **정규화 좌표 (Normalized)** | **월드 좌표 변환 공식 (Implementation)** | **비고** |
|----|----|----|----|
| **Center Spot** | (0, 0) | FieldCenter | 경기장 중앙 |
| **Top-Right** | (1.0, 1.0) | FieldCenter + (FieldSize \* 0.5) | 우측 상단 코너 플래그 |
| **Penalty Spot** | (0, 0.8) (상대 진영) | FieldCenter + (ForwardDir \* FieldLength \* 0.4) | 페널티 마크 위치 |
| **Touchline** | x = ±1.0 | ±FieldWidth \* 0.5 | 터치라인 |

안티그래비티는 모든 위치 계산 로직에서
FieldManager.Instance.GetWorldPosition(Vector2 normalizedPos) 메서드를
통해 실제 좌표를 반환받도록 코드를 작성해야 합니다.<sup>2</sup> 이는
경기장 프리팹이 변경되더라도 로직 수정 없이 AI가 올바른 위치를 찾아가게
보장합니다.

### 2.2. 밀도 기반의 내비게이션 (Density-Based Navigation)

6vs6에서 11vs11로 확장될 때, 선수 1인당 점유 가능한 공간(Per-Player
Space)은 급격히 줄어듭니다. 이는 단순한 NavMeshAgent의 길 찾기로는
해결할 수 없는 "병목 현상(Bunchball)"을 유발합니다. 이를 해결하기 위해
**동적 밀도 가중치(Dynamic Density Weighting)** 시스템을 도입합니다.

**알고리즘 명세:**

1.  **그리드 분할:** 경기장을
    <img src="media/image28.png" style="width:0.64795in;height:0.25082in" />
    그리드로 논리적 분할합니다 (예: 11vs11의 경우
    <img src="media/image2.png" style="width:0.6499in;height:0.24109in" />
    그리드).

2.  **히트맵 갱신:** 매 0.5초마다 각 그리드 셀에 존재하는 선수(아군/적군
    포함)의 수를 카운트하여 OccupancyMap을 갱신합니다.

3.  **비용 주입:** NavMesh의 이동 비용(Cost)을 해당 셀의 점유율에
    비례하여 실시간으로 증가시킵니다.  
    <img src="media/image5.png" style="width:5.90975in;height:0.58368in" />

4.  **경로 재탐색:** 선수가 이동 경로를 계산할 때, 인구 밀도가 높은
    지역은 자연스럽게 우회하거나, 전술적으로 '빈 공간(Open Space)'을
    찾도록 유도합니다.<sup>2</sup>

### 2.3. LOD(Level of Detail) AI 처리

22명의 선수가 매 프레임 복잡한 연산을 수행할 경우 모바일이나 저사양
PC에서 성능 저하가 발생할 수 있습니다. 이를 방지하기 위해 **거리 기반
LOD 시스템**을 적용합니다.

- **LOD 0 (공 주변 30m):** 매 프레임(Update) 판단, 물리 연산 정밀도
  최상, IK(Inverse Kinematics) 활성화.

- **LOD 1 (화면 내, 공과 멂):** 0.1~0.2초 간격으로 AI 판단(Coroutines),
  IK 간소화.

- **LOD 2 (화면 밖):** 0.5초 간격으로 AI 판단, 애니메이션 및 물리 연산
  간소화(Simple Move).

이는 유니티의 **DOTS (Data-Oriented Technology Stack)** 도입을 염두에 둔
데이터 구조 설계를 필요로 하며, 안티그래비티는 데이터 배열을 인접
메모리에 배치하는 구조체(Struct) 설계를 우선해야 합니다.<sup>5</sup>

## 3. 물리 엔진 레이어: 진정한 3D 탄도학 (True 3D Ballistics)

*FM*과 차별화되는 가장 큰 요소는 공의 움직임입니다. *FM*의 공은 때때로
물리 법칙을 무시하고 스크립트된 경로로 이동하거나, 선수 발에 자석처럼
붙는(Magnetic Control) 현상을 보입니다. 로또축구단은 **유니티 PhysX**를
기반으로 하되, 축구 공기역학을 완벽히 구현한 커스텀 물리 미들웨어를
탑재합니다.

### 3.1. 마그누스 효과와 공기역학 (Magnus Effect & Aerodynamics)

공이 회전할 때 발생하는 양력(Lift Force)인 마그누스 효과는 킥의
리얼리티를 결정짓습니다. 감아차기(Curl Shot), 무회전 슛(Knuckleball), 뚝
떨어지는 드롭 슛(Dip Shot)은 모두 이 물리 법칙의 산물입니다.<sup>4</sup>

**물리 구현 공식 (Physics Implementation):**

<img src="media/image6.png" style="width:6.24308in;height:0.75042in" />

여기서:

- <img src="media/image20.png" style="height:0.2232in" /> (공기 밀도):
  기본값
  <img src="media/image8.png" style="width:1.03304in;height:0.25043in" />
  (날씨/고도에 따라 변동 가능<sup>8</sup>).

- <img src="media/image4.png" style="width:0.21916in;height:0.22959in" />
  (양력 계수): 공의 회전 속도에 따른 비선형 계수.

- <img src="media/image27.png" style="width:0.13265in;height:0.23469in" />
  (각속도): 공의 회전 벡터.

- <img src="media/image22.png" style="width:0.10498in;height:0.24145in" />
  (속도): 공의 진행 벡터.

**안티그래비티 구현 가이드 (BallAerodynamics.cs):**

> C#

void FixedUpdate() {  
Vector3 velocity = \_rb.velocity;  
Vector3 angularVelocity = \_rb.angularVelocity;  
  
// 마그누스 힘의 방향: 각속도와 선속도의 외적  
Vector3 magnusDir = Vector3.Cross(angularVelocity,
velocity).normalized;  
  
// 힘의 크기 계산 (설정값 참조)  
float liftCoeff = MatchEngineConfig.Instance.BallLiftCoefficient;  
float airDensity = MatchEngineConfig.Instance.CurrentAirDensity;  
float magnusMagnitude = liftCoeff \* airDensity \*
velocity.sqrMagnitude;  
  
// 힘 적용  
\_rb.AddForce(magnusDir \* magnusMagnitude);  
  
// 항력(Drag) 적용: 속도의 제곱에 비례  
\_rb.AddForce(-velocity.normalized \*
(MatchEngineConfig.Instance.DragCoefficient \*
velocity.sqrMagnitude));  
}

이 코드는 FixedUpdate 내에서 매 프레임 실행되어야 하며, Rigidbody의 기본
Drag는 0으로 설정하고 스크립트에서 직접 제어합니다.<sup>7</sup>

### 3.2. 지면 마찰과 환경 변수 (Environmental Friction)

잔디의 상태는 공이 굴러가는 거리(Run)에 직접적인 영향을 미칩니다.

- **Dry Grass:** 마찰 계수 높음
  (<img src="media/image12.png" style="width:0.78434in;height:0.24053in" />).
  공이 금방 멈춤.

- **Wet/Slick Grass:** 마찰 계수 낮음
  (<img src="media/image19.png" style="width:0.78434in;height:0.24053in" />).
  공이 미끄러지듯 빠르게 이동 (스키드 현상).

충돌 감지 시 PhysicMaterial을 교체하거나, AddTorque를 통해 구름
저항(Rolling Resistance)을 시뮬레이션해야 합니다. 이는 패스 세기 조절
AI가 반드시 고려해야 할 변수입니다.<sup>9</sup>

### 3.3. 충돌과 물리적 경합 (Physical Duels)

선수 간의 충돌은 단순한 애니메이션 블렌딩이 아닙니다. 두 Rigidbody 간의
운동량 보존 법칙에 기반하되, \*\*선수 능력치(Stat)\*\*가 물리 법칙을
왜곡(Bias)시키는 형태여야 합니다.<sup>2</sup>

**경합 승리 확률 공식
(**<img src="media/image11.png" style="width:0.45182in;height:0.25218in" />**):**

<img src="media/image14.png" style="width:6.24308in;height:0.58366in" />

<img src="media/image17.png" style="width:6.24308in;height:0.81296in" />

이 공식은 <sup>2</sup> 문서의 '물리 경합 성공률'을 기반으로 하며, 승리
시 상대방은 밀려나거나(AddForce), 균형을 잃는 애니메이션(Stumble)이
재생됩니다. '유리몸(Glass Body)' 특성을 가진 선수는 충돌 충격량이
임계치를 넘을 경우 부상 확률이 급격히 증가합니다.<sup>2</sup>

## 4. 통계적 결정론: RPG 요소의 엔진 통합

모든 물리적 액션은 선수의 능력치(Stat)에서 시작됩니다. "빠른 선수가
무조건 이기는" 단순한 메타<sup>1</sup>를 방지하기 위해, 복합적인 스탯
상호작용 시스템을 구축합니다.

### 4.1. 능력치 산출 및 보정 공식 (Stat Formulas)

능력치는 정적인 값이 아닙니다. 경기 중 체력, 사기, 호흡(Breath)에 의해
실시간으로 변동됩니다.<sup>2</sup>

#### 실시간 능력치 계산 (<img src="media/image15.png" style="width:0.67033in;height:0.25137in" />):

<img src="media/image16.png" style="width:6.24308in;height:0.58366in" />

- **StateIndex (상태 지수):**
  <img src="media/image13.png" style="width:2.16154in;height:0.24941in" />.
  체력과 호흡이 바닥나면 능력치가 50%로 급감합니다.

- **MoraleMod (사기 보정):** 득점/실점 직후
  <img src="media/image25.png" style="width:0.98617in;height:0.23876in" />
  사이의 모멘텀 부여.

### 4.2. 오차 원뿔 시스템 (Error Cone System)

슈팅이나 패스의 정확도는 '성공/실패'의 이진 결과가 아닌, \*\*오차
범위(Error Radius)\*\*로 구현됩니다.<sup>2</sup>

- **Target Vector:** 목표 지점(골대 구석, 동료 발 앞).

- **Error Angle:**
  <img src="media/image23.png" style="width:2.18261in;height:0.24944in" />도.

- **Final Vector:** Target Vector를 Error Angle 범위 내에서 무작위 회전.

이 시스템은 능력치가 낮은 선수가 찼을 때 공이 터무니없이
빗나가는(개발질) 상황을 자연스럽게 연출하며, 거리가 멀어질수록 오차가
증폭되는 현실적인 탄착군을 형성합니다.

### 4.3. 히든 스탯 및 특성 로직

<sup>2</sup>에 정의된 히든 특성은 게임의 변수를 창출합니다.

- **Glass Body:** InjuryResistance 값을 고정적으로 낮춤. 충돌 시 부상
  판정 루틴을 2회 수행(Disadvantage Roll).

- **Iron Man:** StaminaDrain 속도를 0.8배로 감소시키고, 부상 저항을
  극대화.

- **Consistency:** 매 경기 시작 시 부여되는 Condition 난수의 편차를
  줄임.

## 5. AI 아키텍처: 하이브리드 지능 (Hybrid Intelligence)

매치 엔진의 두뇌는 \*\*HFSM(계층적 유한 상태 머신)\*\*과 \*\*유틸리티
이론(Utility Theory)\*\*의 결합으로 구성됩니다. 이는 전술적
규율(Macro)과 창의적 플레이(Micro)를 동시에 만족시킵니다.

### 5.1. 매크로 판단: HFSM (Context Management)

선수는 현재 경기 상황에 따라 큰 틀의 행동 양식(State)을
결정합니다.<sup>2</sup>

| **상위 상태 (Root State)** | **하위 상태 (Sub-State)** | **설명 및 전이 조건** |
|----|----|----|
| **In Possession (공격)** | BuildUp | 후방에서 공을 돌리며 기회 모색 (수비 라인 높을 때) |
|  | Progression | 미드필드 지역에서 전진 패스/드리블 시도 |
|  | Penetration | 파이널 서드 진입, 결정적 찬스 생성 (슈팅/킬패스) |
| **Out of Possession (수비)** | Pressing | 공 가진 상대를 압박 (전술 지침에 따라 강도 조절) |
|  | Block Formation | 지정된 수비 구역(Zone)으로 복귀하여 대형 유지 |
|  | Tracking Back | 역습 당하는 상황에서 전력 질주로 복귀 |
| **Transition (전환)** | A-to-D | 공을 뺏긴 직후 3초. 즉시 압박(Gegenpressing) 또는 후퇴 결정 |
|  | D-to-A | 공을 뺏은 직후. 역습(Counter) 또는 템포 조절 결정 |

### 5.2. 마이크로 판단: Utility Theory (Scoring Actions)

구체적인 행동(패스, 드리블, 슈팅)은 각 행동에 점수(Score)를 매겨 가장
높은 것을 선택하는 방식입니다.<sup>10</sup>

**유틸리티 산출 공식:**

<img src="media/image18.png" style="width:6.24308in;height:0.65662in" />

#### 예시: 패스 대상 선택 로직 (<img src="media/image1.png" style="width:0.83822in;height:0.25147in" />)

1.  **전진성 (Progressiveness):** 패스 시 골대와 얼마나 가까워지는가?
    (Weight: 0.4)

2.  **안전도 (Safety):** 패스 경로(Raycast) 상에 적이 없는가? 패스 성공
    확률 모델<sup>12</sup> 활용. (Weight: 0.3)

3.  **동료 상태 (Teammate Quality):** 받는 동료의 능력치와 현재 공간
    확보(Pitch Control) 상태. (Weight: 0.2)

4.  **전술 지침 (Tactics):** 감독이 '짧은 패스'를 지시했는가? (거리별
    가중치 조절). (Weight: 0.1)

**반응 곡선(Response Curve)의 활용:** 입력값을 선형적으로 반영하지 않고
곡선을 사용합니다. 예를 들어, \*\*'골대와의 거리'\*\*에 따른 슈팅
선호도는 Sigmoid 곡선을 사용하여, 특정 거리(예: 25m) 밖에서는 슈팅 시도
점수가 급격히 0에 수렴하게 만듭니다.<sup>10</sup> 단, '중거리 슛' 특성이
있는 선수는 이 곡선의 임계값이 더 넓게 설정됩니다.

### 5.3. 의사결정 주기 (Thinking Interval)

모든 AI가 매 프레임 판단을 내리면 CPU 부하가 걸릴 뿐만 아니라,
비현실적인 반응 속도를 보입니다. 따라서 **'인지 지연(Reaction Delay)'**
시스템을 도입합니다.<sup>2</sup>

- **Think Tick:** 0.1s ~ 0.5s 가변 주기.

- **Formula:**
  <img src="media/image7.png" style="width:4.23064in;height:0.25009in" />.

- 판단력이 좋은 선수는 더 자주 상황을 갱신하여 빈 공간을 빨리 찾지만,
  둔한 선수는 상황이 종료된 뒤에 반응하는 모습을 시뮬레이션합니다.

## 6. 공간 지능: 전술적 깊이의 구현

축구는 공간 싸움입니다. 안티그래비티는 AI가 공간을 수학적으로 이해하도록
**피치 컨트롤(Pitch Control)** 모델을 구현해야 합니다.

### 6.1. 피치 컨트롤 모델 (Pitch Control Implementation)

William Spearman의 모델<sup>13</sup>을 단순화하여 적용합니다. 경기장의
각 지점
<img src="media/image24.png" style="width:0.1154in;height:0.25177in" />를
누가 통제하고 있는지 확률적으로 계산합니다.

<img src="media/image10.png" style="width:6.24308in;height:0.76084in" />

- <img src="media/image26.png" style="width:0.14583in;height:0.25in" />:
  해당 지점까지 도달하는 데 걸리는 시간 (거리 / 속도 + 반응시간).

- <img src="media/image21.png" style="width:0.1176in;height:0.25657in" />:
  불확실성 계수.

이 히트맵(Heatmap)은 0.5초마다 갱신되며, 공격수 AI는
<img src="media/image3.png" style="width:1.087in;height:0.25085in" />인
지점(아군이 확보한 공간)으로 침투하고, 수비수 AI는 \$PC(x)\$가 높은 적의
공간을 지우러 이동합니다.

### 6.2. 동적 포메이션과 테더링 (Dynamic Formation Tethering)

포메이션은 고정된 점이 아니라 \*\*탄성(Elasticity)\*\*을 가진
테더(Tether) 시스템입니다.

- **Anchor Point:** 공의 위치에 따라 포메이션 전체가 이동하는 기준점.

- **Tether:** 선수는 Anchor Point에서 일정 거리 이상 멀어지면, 고무줄
  당기듯 복귀하려는 힘(Steering Force)을 받습니다.

- **라인 높이(Line Height):** 전술 설정<sup>15</sup>에 따라 수비 라인의
  Z축 Anchor가 조정됩니다.

  - Low Block: 골라인 앞 25m.

  - Mid Block: 40m.

  - High Line: 하프라인 근처.

### 6.3. 대인 방어 vs 지역 방어 (Marking Logic)

<sup>16</sup>에 따라 수비 로직을 구분합니다.

- **대인 방어 (Man Marking):** 특정 OpponentID를 추적. 상대가 어디로
  가든 따라감. 체력 소모 극심.

- **지역 방어 (Zonal Marking):** 본인의 FormationAnchor 주변
  반경(Zone)을 지킴. 적이 존에 들어오면 추적 시작, 나가면
  인계(Hand-over).

- **하이브리드:** 기본은 지역 방어이나, 세트피스 상황이나 위험
  지역(Box)에서는 대인 마크로 전환.

## 7. 스페셜리스트 AI: 골키퍼와 감독

### 7.1. 골키퍼 AI: 각도 좁히기 (Angle Bisector)

골키퍼는 일반 필드 플레이어와 완전히 다른 로직을 가집니다.<sup>2</sup>

- **위치 선정:** 공과 골대 중심을 잇는 선(Bisector) 상에 위치하되,
  공과의 거리에 따라 전진/후퇴.

  - **Sweeper Keeper:** 수비 라인 뒷공간 커버를 위해 더 전진. Pitch
    Control 모델에서 아군 수비가 도달 불가능한 지역을 커버.

- **세이브 판정:** 시각적 충돌 이전에 수학적 판정 선행.  
  <img src="media/image9.png" style="width:5.92017in;height:0.58368in" />  
  슈팅 궤적이 Reach 범위 내에 있으면 세이브 성공.

### 7.2. 감독 라이선스 시스템 연동

사용자의 라이선스 등급(무, C, B, A, P)은 단순한 UI 해금이 아니라 AI
성능에 직접적인 가중치로 작용합니다.<sup>2</sup>

- **License Level C:** AI가 전술 지침을 70% 확률로 이행. (오해나 실수
  발생).

- **License Level A:** AI가 전술 지침을 95% 확률로 이행하며, 복잡한
  역할(인버티드 윙백 등) 수행 가능.

- 이는 초보 감독일수록 선수들이 말을 안 듣는 답답함을 구현하여, 성장의
  동기를 부여합니다.

## 8. 기술적 구현 가이드: 안티그래비티 프롬프트 전략

### 8.1. 폴더 및 스크립트 구조 (Project Structure)

안티그래비티에게 다음 구조를 강제하십시오.

/Scripts  
/Core  
MatchEngine.cs (Singleton, Loop Controller)  
MatchConfig.cs (ScriptableObject, Constants)  
/Entities  
/Player  
PlayerBrain.cs (HFSM Controller)  
PlayerStats.cs (Data Container)  
PlayerMotion.cs (Physics & NavMesh)  
/Ball  
BallAerodynamics.cs (Magnus, Drag)  
BallCollision.cs  
/AI  
/Decision  
UtilityScorer.cs  
ResponseCurves.cs  
/Tactics  
FieldManager.cs (Spatial Analysis)  
FormationSystem.cs  
/Data  
/Roles (Striker, Defender assets)  
/Formations

### 8.2. 데이터 구조체 최적화 (DOTS Prep)

향후 22명 이상의 연산(관중, 스탭 등)을 위해 데이터는 class 대신 struct와
NativeArray를 적극 활용할 것을 권장합니다.

> C#

public struct PlayerRuntimeData {  
public float3 Position;  
public float3 Velocity;  
public float Stamina;  
public float Breath;  
//... Blittable types only  
}

### 8.3. 디버깅 및 프로파일링

매치 엔진 개발 시 가장 중요한 것은 \*\*'왜 이 선수가 저기로
갔는가?'\*\*를 아는 것입니다. 안티그래비티에게 다음 기능을 필수
구현하도록 지시하십시오.

- **Debug Overlay:** 선수 머리 위에 현재 상태(State), 의도(Intention),
  현재 유틸리티 점수 최고점(Best Score) 표시.

- **Trajectory Prediction:** 공의 예상 궤적을 LineRenderer로 그리기
  (물리 연산과 일치하는지 확인용).

## 9. 결론: 마스터피스를 향하여

본 문서는 '로또축구단'의 매치 엔진이 단순한 게임을 넘어 **축구라는
복잡계(Complex System)를 시뮬레이션**하기 위한 청사진입니다. 정규화된
좌표계와 밀도 기반 내비게이션은 확장성을 보장하며, 마그누스 효과가
적용된 3D 탄도학은 시각적 리얼리티를, 그리고 유틸리티 이론 기반의 AI는
전술적 깊이를 제공합니다.

안티그래비티(Anti-Gravity)는 이 문서에 정의된 수식과 구조를 바탕으로, 한
줄의 코드도 이유 없이 작성하지 않아야 합니다. 이 지침서를 따름으로써
우리는 "운(Lotto)"으로 시작해 "전설(Legend)"이 되는 과정이 얼마나
치열하고 정교한지를 증명하는 엔진을 완성할 수 있을 것입니다.

# 부록: 핵심 물리 및 AI 상수 테이블 (Configuration Table)

| **파라미터 (Parameter)** | **권장값 (Default)** | **설명 및 출처** |
|----|----|----|
| **Air Density (**<img src="media/image20.png" style="height:0.2232in" />**)** | 1.225 | 표준 대기압. 날씨(비/눈)에 따라 변동 가능 <sup>8</sup> |
| **Ball Mass** | 0.43 kg | FIFA 공인구 표준 규격 |
| **Magnus Coeff (**<img src="media/image4.png" style="width:0.21916in;height:0.22959in" />**)** | 0.0004 (approx) | 회전수에 따른 양력 계수, BallAerodynamics.cs에서 커브 조정 <sup>4</sup> |
| **Drag Coeff (Air)** | 0.2 (Sphere) | 공기 저항 계수. 스크립트에서 속도에 따라 가변 적용 <sup>19</sup> |
| **Ground Friction (Dry)** | 0.8 | 마른 잔디 마찰력. 공이 덜 구름. |
| **Ground Friction (Wet)** | 0.4 | 젖은 잔디. 스키드 현상 발생. |
| **Base Decision Tick** | 0.2s | AI 판단 주기 기본값. Mental 스탯에 따라 가감 <sup>2</sup> |
| **Reaction Time (Human)** | 0.7s | 피치 컨트롤 모델에서 사람의 인지 반응 속도 상수 <sup>13</sup> |
| **Max Sprint Speed** | 9.8 m/s | Speed 스탯 99일 때의 최대 속도 (약 35km/h) |
| **Shot Error Noise** | ±15 deg | Finishing 스탯 최하일 때 슈팅 각도 오차 범위 <sup>2</sup> |

이 테이블은 MatchEngineConfig ScriptableObject의 초기값으로 사용되어야
합니다.

#### 참고 자료

1.  The match engine is still placebo : r/footballmanagergames - Reddit,
    2월 19, 2026에 액세스,
    [<u>https://www.reddit.com/r/footballmanagergames/comments/1peylab/the_match_engine_is_still_placebo/</u>](https://www.reddit.com/r/footballmanagergames/comments/1peylab/the_match_engine_is_still_placebo/)

2.  \# \[로또축구단\] 매치 엔진 개발 마스터 지침서 (Match E.txt

3.  Architect your code for efficient changes and debugging with
    ScriptableObjects \| Unity, 2월 19, 2026에 액세스,
    [<u>https://unity.com/how-to/architect-game-code-scriptable-objects</u>](https://unity.com/how-to/architect-game-code-scriptable-objects)

4.  kiara-jacob/MagnusEffect_VPython: Magnus Effect - The ... - GitHub,
    2월 19, 2026에 액세스,
    [<u>https://github.com/kiara-jacob/MagnusEffect_VPython</u>](https://github.com/kiara-jacob/MagnusEffect_VPython)

5.  An Evaluation of the Unity Machine Learning Agents Toolkit in Dense
    and Sparse Reward Video Game Environments - DiVA, 2월 19, 2026에
    액세스,
    [<u>https://www.diva-portal.org/smash/get/diva2:1563588/FULLTEXT01.pdf</u>](https://www.diva-portal.org/smash/get/diva2:1563588/FULLTEXT01.pdf)

6.  Unity's Data-Oriented Technology Stack (DOTS), 2월 19, 2026에
    액세스, [<u>https://unity.com/dots</u>](https://unity.com/dots)

7.  Soccer Physics: CFD Analysis of the Magnus Effect - SimScale, 2월
    19, 2026에 액세스,
    [<u>https://www.simscale.com/blog/simulation-magnus-effect/</u>](https://www.simscale.com/blog/simulation-magnus-effect/)

8.  2 The aerodynamics of the beautiful game 1 Introduction - MIT, 2월
    19, 2026에 액세스,
    [<u>https://thales.mit.edu/bush/wp-content/uploads/2013/11/Beautiful-Game-2013.pdf</u>](https://thales.mit.edu/bush/wp-content/uploads/2013/11/Beautiful-Game-2013.pdf)

9.  Applied Physics and Technologies in Football, The Earth´s
    Gravitational Field and Gravitational Energy Emission, Effects of
    the, 2월 19, 2026에 액세스,
    [<u>https://mjbas.com/data/uploads/83209.pdf</u>](https://mjbas.com/data/uploads/83209.pdf)

10. An Introduction to Utility Theory - Game AI Pro, 2월 19, 2026에
    액세스,
    [<u>http://www.gameaipro.com/GameAIPro/GameAIPro_Chapter09_An_Introduction_to_Utility_Theory.pdf</u>](http://www.gameaipro.com/GameAIPro/GameAIPro_Chapter09_An_Introduction_to_Utility_Theory.pdf)

11. An introduction to Utility AI - The Shaggy Dev, 2월 19, 2026에
    액세스,
    [<u>https://shaggydev.com/2023/04/19/utility-ai/</u>](https://shaggydev.com/2023/04/19/utility-ai/)

12. (PDF) Physics-Based Modeling of Pass Probabilities in Soccer -
    ResearchGate, 2월 19, 2026에 액세스,
    [<u>https://www.researchgate.net/publication/315166647_Physics-Based_Modeling_of_Pass_Probabilities_in_Soccer</u>](https://www.researchgate.net/publication/315166647_Physics-Based_Modeling_of_Pass_Probabilities_in_Soccer)

13. A New Metric for Pitch Control based on an Intuitive Motion Model,
    2월 19, 2026에 액세스,
    [<u>https://www.sfu.ca/~tswartz/papers/pitch_control.pdf</u>](https://www.sfu.ca/~tswartz/papers/pitch_control.pdf)

14. Pitch Control — Finding The Right Pass \| by Ishdeep Chadha -
    Medium, 2월 19, 2026에 액세스,
    [<u>https://medium.com/@ishdeepsinghchadha/pitch-control-finding-the-right-pass-40e42323ceab</u>](https://medium.com/@ishdeepsinghchadha/pitch-control-finding-the-right-pass-40e42323ceab)

15. Defensive Line Height: The Metric Defining Modern Defending - The
    ..., 2월 19, 2026에 액세스,
    [<u>https://the-footballanalyst.com/defensive-line-height-the-metric-defining-modern-defending/</u>](https://the-footballanalyst.com/defensive-line-height-the-metric-defining-modern-defending/)

16. Zonal marking: football tactics explained - Coaches' Voice, 2월 19,
    2026에 액세스,
    [<u>https://learning.coachesvoice.com/cv/zonal-marking-football-tactics-explained-mourinho-conte-simeone/</u>](https://learning.coachesvoice.com/cv/zonal-marking-football-tactics-explained-mourinho-conte-simeone/)

17. Improving Dribbling, Passing, and Marking Actions in Soccer ..., 2월
    19, 2026에 액세스,
    [<u>https://arxiv.org/abs/2401.03406</u>](https://arxiv.org/abs/2401.03406)

18. Scoring smarter goals with the help of AI in soccer - Ultralytics,
    2월 19, 2026에 액세스,
    [<u>https://www.ultralytics.com/blog/scoring-smarter-goals-with-the-help-of-ai-in-soccer</u>](https://www.ultralytics.com/blog/scoring-smarter-goals-with-the-help-of-ai-in-soccer)

19. The drag force on an American football, 2월 19, 2026에 액세스,
    [<u>http://users.df.uba.ar/sgil/physics_paper_doc/papers_phys/fluids/drag_football.pdf</u>](http://users.df.uba.ar/sgil/physics_paper_doc/papers_phys/fluids/drag_football.pdf)
