# [Day 9] AI 전술 대규모 리팩토링 & 물리 시스템 현대화

## 📅 기본 정보
- **날짜**: 2026-02-07 (토요일)
- **개발 일차**: 9일차
- **작업 카테고리**: 매치엔진 / AI / 최적화

## 🛠️ 오늘의 구현 (Implementation)
> 오늘 작업한 핵심 기능과 로직을 기술합니다.

- [ ] **AI 전술 구조 개선**:
  - `AttackingTactics.cs`, `DecisionEvaluator.cs`가 더 이상 하드코딩된 값을 쓰지 않고 `DecisionSettings.cs`, `AgentBallHandlerSettings.cs`를 참조하도록 변경.
  - `FootballPhysicsUtils.cs`의 레거시 로직(Teammate Cluster Clearance 등)을 `RootState_Attacking.cs`로 이관하고 파일 삭제.
  - `MatchEngineConfig.cs` (미사용 에셋) 제거 및 `DecisionSettings`로 통합 확인.

- [ ] **물리 엔진 의존성 제거 (`BallForceAccumulator` 삭제)**:
  - `AgentBallHandler.cs` (드리블, 킥), `AgentSkillSystem.cs` (태클)에서 `BallForceAccumulator` 의존성 제거.
  - 공의 `Rigidbody`에 직접 `AddForce`를 적용하여 반응 속도 개선 및 컴파일 에러 해결.

- [ ] **슈팅 메커니즘 고도화**:
  - 기존 패스 로직을 공유하던 슈팅을 `AgentBallHandler.Shoot()`으로 분리.
  - `AgentBallHandlerSettings`에 `Shooting` 전용 섹션 추가 (PowerBase, DistFactor, ErrorAngle 등 세분화).

- [ ] **골키퍼(GK) 로직 안정화**:
  - `GoalkeeperController.cs`의 네임스페이스 중복 에러 수정.
  - `GKState_Guarding` 프로퍼티의 Lazy Initialization 적용으로 초기화 순서 문제 해결.
  - 선방(Save) 반응 속도 및 위치 선정 로직 튜닝.

## 🎥 영상 소스 & 연출 (For YouTube)
> 1분 내외의 개발 로그 영상에 들어갈 시각적 요소를 기록합니다.

1. **메인 샷**: 
   - 리팩토링된 AI가 `DecisionSettings`값에 따라 동적으로 슈팅/패스를 결정하는 장면.
   - 키퍼가 `GKDangerDistance` 밖으로 나온 공을 걷어내는 '스위퍼 키퍼' 동작.
2. **버그/개그 샷**: 
   - (해결 전) 키퍼가 공을 피해 도망가거나, 물리 충돌로 선수가 우주로 날아가는 장면 (Physics Explosion).
3. **강조할 점**: 
   - "이제 코드 한 줄 수정 없이 인스펙터에서 AI의 '슈팅 빈도'와 '패스 거리'를 조절할 수 있습니다."

## 🐛 이슈 및 버그 (Issues)
- **해결됨**: 
  - `AgentBallHandler`가 `BallForceAccumulator`를 찾지 못해 발생하던 컴파일 에러.
  - `GoalkeeperController`의 네임스페이스 중복 선언 (`cs0234`).
  - 매치 재시작 시 선수들이 겹치거나 붕 뜨는 초기화 문제 (`MatchManager.ResetPlayerPositions` 개선).
- **진행 중**: 
  - 3D 모델 애니메이션 싱크 미세 조정 (드리블 시 발과 공의 간격).
